(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ad2b9ca"],{"05ec":function(t,e,a){"use strict";a("869d")},"262f":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var r=a("7a23"),n=a("0091"),o=a("ca8f");function i(t){var e=Object(r["u"])(!1),a=Object(r["u"])(null),i=Object(r["b"])((function(){return o["a"].state.user}));n["a"].get("/favorite/query?recipe_id="+t+"&user_id="+i.value.id).then((function(t){t.data.favorite.length>0&&(a.value=t.data.favorite[0].id,e.value=!0)}));var c=function(){n["a"].post("/favorite",{recipe_id:t,user_id:i.value.id}).then((function(t){t.data.success&&(e.value=!0,a.value=t.data.favorite.id)}))},u=function(){n["a"].delete("/favorite/"+a.value).then((function(t){t.data.success&&(e.value=!1,a.value=null)}))};return{addedFave:e,addToFavorites:c,removeFromFavorites:u}}},"869d":function(t,e,a){},"8fdc":function(t,e,a){"use strict";a.r(e);a("b0c0");var r=a("7a23"),n=Object(r["F"])("data-v-6e1adc0d");Object(r["s"])("data-v-6e1adc0d");var o={id:"account-page"},i={key:0},c={"data-test":"welcome-message"},u={id:"favorites"},s=Object(r["g"])("h3",null,[Object(r["g"])("b",null,"Your Favorites")],-1),d={key:0},l=Object(r["f"])(" You don't have any favorites. "),b=Object(r["f"])("Add some."),f={key:1},v={id:"loginForm"},j=Object(r["g"])("h2",null,"Login",-1),O=Object(r["f"])(" Email: "),p=Object(r["f"])(" Password: "),g=Object(r["f"])("Register"),h={key:0};Object(r["q"])();var m=n((function(t,e,a,m,y,F){var w=Object(r["w"])("router-link");return Object(r["p"])(),Object(r["d"])("div",o,[F.user?(Object(r["p"])(),Object(r["d"])("div",i,[Object(r["g"])("h2",c,"Hi, "+Object(r["y"])(F.user.name)+"!",1),Object(r["g"])("div",u,[s,y.favorites&&0==y.favorites.length?(Object(r["p"])(),Object(r["d"])("p",d,[l,Object(r["g"])(w,{to:"/recipes"},{default:n((function(){return[b]})),_:1})])):Object(r["e"])("",!0),Object(r["g"])("ul",null,[(Object(r["p"])(!0),Object(r["d"])(r["a"],null,Object(r["v"])(y.favorites,(function(t,e){return Object(r["p"])(),Object(r["d"])("li",{key:e},Object(r["y"])(t.name),1)})),128))])]),Object(r["g"])("button",{onClick:e[1]||(e[1]=function(){return F.logout&&F.logout.apply(F,arguments)}),"data-test":"logout-button"},"Logout")])):(Object(r["p"])(),Object(r["d"])("div",f,[Object(r["g"])("div",v,[j,Object(r["g"])("div",null,[Object(r["g"])("label",null,[O,Object(r["E"])(Object(r["g"])("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=function(t){return y.data.email=t}),"data-test":"test-email"},null,512),[[r["A"],y.data.email]])])]),Object(r["g"])("div",null,[Object(r["g"])("label",null,[p,Object(r["E"])(Object(r["g"])("input",{type:"password","onUpdate:modelValue":e[3]||(e[3]=function(t){return y.data.password=t}),"data-test":"password-input"},null,512),[[r["A"],y.data.password]])])]),Object(r["g"])("button",{onClick:e[4]||(e[4]=function(){return F.login&&F.login.apply(F,arguments)}),"data-test":"login-button"},"Login"),Object(r["g"])(w,{to:"/register",class:"register_btn","data-test":"register-button"},{default:n((function(){return[g]})),_:1}),y.errors?(Object(r["p"])(),Object(r["d"])("ul",h,[(Object(r["p"])(!0),Object(r["d"])(r["a"],null,Object(r["v"])(y.errors,(function(t,e){return Object(r["p"])(),Object(r["d"])("li",{class:"error",key:e},Object(r["y"])(t),1)})),128))])):Object(r["e"])("",!0)])]))])})),y=(a("d81d"),a("0091")),F=a("262f"),w={components:{},setup:function(t){var e=Object(F["a"])(t.id),a=e.addedFave,r=e.addToFavorites,n=e.removeFromFavorites;return{addedFave:a,addToFavorites:r,removeFromFavorites:n}},data:function(){return{data:{name:"",email:"",password:""},errors:null,favorites:[]}},computed:{user:function(){return this.$store.state.user},recipes:function(){return this.$store.state.recipes}},methods:{loadFavorites:function(){var t=this;this.user&&y["a"].get("favorite/query?user_id="+this.user.id).then((function(e){t.favorites=e.data.favorite.map((function(e){return t.$store.getters.getRecipeById(e.recipe_id)}))}))},login:function(){var t=this;y["a"].post("login",this.data).then((function(e){e.data.authenticated?t.$store.commit("setUser",e.data.user):t.errors=e.data.errors}))},logout:function(){var t=this;y["a"].post("logout").then((function(e){e.data.success&&t.$store.commit("setUser",!1)}))},register:function(){var t=this;y["a"].post("register",this.data).then((function(e){e.data.authenticated?t.$store.commit("setUser",e.data.user):t.errors=e.data.errors}))}},watch:{user:function(){this.loadFavorites()}},mounted:function(){this.loadFavorites()}};a("05ec");w.render=m,w.__scopeId="data-v-6e1adc0d";e["default"]=w},b0c0:function(t,e,a){var r=a("83ab"),n=a("9bf2").f,o=Function.prototype,i=o.toString,c=/^\s*function ([^ (]*)/,u="name";r&&!(u in o)&&n(o,u,{configurable:!0,get:function(){try{return i.call(this).match(c)[1]}catch(t){return""}}})},d81d:function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").map,o=a("1dde"),i=o("map");r({target:"Array",proto:!0,forced:!i},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-7ad2b9ca.a2d23e51.js.map