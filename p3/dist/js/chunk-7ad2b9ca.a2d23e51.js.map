{"version":3,"sources":["webpack:///./src/components/pages/AccountPage.vue?7e85","webpack:///./src/components/features/favorite.js","webpack:///./src/components/pages/AccountPage.vue","webpack:///./src/components/pages/AccountPage.vue?a676","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["favorite","recipeId","addedFave","ref","favoriteId","user","computed","store","state","axios","get","value","id","then","response","data","length","addToFavorites","post","recipe_id","user_id","success","removeFromFavorites","delete","data-test","name","favorites","to","key","logout","type","email","password","login","class","errors","error","index","components","setup","props","this","$store","recipes","methods","loadFavorites","map","getters","getRecipeById","authenticated","commit","register","watch","mounted","render","__scopeId","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","call","match","$","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","arguments","undefined"],"mappings":"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","file":"js/chunk-7ad2b9ca.a2d23e51.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AccountPage.vue?vue&type=style&index=0&id=6e1adc0d&scoped=true&lang=css\"","import { ref, computed } from 'vue'\nimport { axios } from '@/common/app.js';\nimport { store } from '@/common/store.js';\n\nexport default function favorite(recipeId) {\n\n    let addedFave = ref(false);\n    let favoriteId = ref(null);\n\n    let user = computed(() => {\n        return store.state.user;\n    });\n\n    axios.get('/favorite/query?recipe_id=' + recipeId + '&user_id=' + user.value.id).then((response) => {\n        if (response.data.favorite.length > 0) {\n            favoriteId.value = response.data.favorite[0].id;\n            addedFave.value = true;\n        }\n    });\n\n    const addToFavorites = () => {\n        axios.post('/favorite', {\n            recipe_id: recipeId,\n            user_id: user.value.id\n        }).then((response) => {\n            if (response.data.success) {\n                addedFave.value = true;\n                favoriteId.value = response.data.favorite.id;\n            }\n        });\n    }\n    \n    const removeFromFavorites = () => {\n        axios.delete('/favorite/' + favoriteId.value).then((response) => {\n            if (response.data.success) {\n                addedFave.value = false;\n                favoriteId.value = null;\n            }\n        });\n    }\n\n    return { addedFave, addToFavorites, removeFromFavorites }\n}","<template>\n    <div id=\"account-page\">\n        <div v-if=\"user\">\n            <h2 data-test=\"welcome-message\">Hi, {{ user.name }}!</h2>\n\n            <div id=\"favorites\">\n                <h3><b>Your Favorites</b></h3>\n                <p v-if=\"favorites && favorites.length == 0\">\n                    You don't have any favorites. <router-link to=\"/recipes\">Add some.</router-link>\n                </p>\n                <ul>\n                    <li v-for=\"(favorite, key) in favorites\" v-bind:key=\"key\">\n                        {{ favorite.name }}\n                    </li> \n                </ul>\n            </div>\n\n            <button v-on:click=\"logout\" data-test=\"logout-button\">Logout</button>\n        </div>\n\n        <div v-else>\n            <div id=\"loginForm\">\n            <h2>Login</h2>\n            <div>\n                <label>\n                    Email:\n                    <input type=\"text\" v-model=\"data.email\" data-test=\"test-email\"/>\n                </label>\n            </div>\n            <div>\n                <label>\n                    Password:\n                    <input type=\"password\" v-model=\"data.password\" data-test=\"password-input\"/>\n                </label>\n            </div>\n\n            <button v-on:click=\"login\" data-test=\"login-button\">Login</button>\n\n            <router-link to=\"/register\" class=\"register_btn\" data-test=\"register-button\">Register</router-link>\n\n            <ul v-if=\"errors\">\n                <li class=\"error\" v-for=\"(error, index) in errors\" :key=\"index\">\n                    {{ error }}\n                </li>\n            </ul>\n            </div>\n        </div>\n\n    </div>\n</template>\n\n<script>\nimport { axios } from \"@/common/app.js\";\nimport favorite from '@/components/features/favorite.js'; \n\n\nexport default {\n    components: {\n        \n    },\n    setup(props) {\n        const { addedFave, addToFavorites, removeFromFavorites } = favorite(\n            props.id\n        );\n        return { addedFave, addToFavorites, removeFromFavorites };\n    },\n    data() {\n        return {\n            data: {\n                name: \"\",\n                email: \"\",\n                password: \"\",\n            },\n            errors: null,\n            favorites: [],\n        };\n    },\n    computed: {\n        user() {\n            return this.$store.state.user;\n        },\n        recipes() {\n            return this.$store.state.recipes;\n        },\n    },\n    methods: {\n        loadFavorites() {\n            if (this.user) {\n                axios\n                    .get(\"favorite/query?user_id=\" + this.user.id)\n                    .then((response) => {\n                        this.favorites = response.data.favorite.map(\n                            (favorite) => {\n                                return this.$store.getters.getRecipeById(\n                                    favorite.recipe_id\n                                );\n                            }\n                        );\n                    });\n            }\n        },\n        login() {\n            axios.post(\"login\", this.data).then((response) => {\n                if (response.data.authenticated) {\n                    this.$store.commit(\"setUser\", response.data.user);\n                } else {\n                    this.errors = response.data.errors;\n                }\n            });\n        },\n        logout() {\n            axios.post(\"logout\").then((response) => {\n                if (response.data.success) {\n                    this.$store.commit(\"setUser\", false);\n                }\n            });\n        },\n        register() {\n            axios.post(\"register\", this.data).then((response) => {\n                if (response.data.authenticated) {\n                    this.$store.commit(\"setUser\", response.data.user);\n                } else {\n                    this.errors = response.data.errors;\n                }\n            });\n        },\n    },\n    watch: {\n        user() {\n            this.loadFavorites();\n        },\n    },\n    mounted() {\n        this.loadFavorites();\n    },\n};\n</script>\n<style scoped>\n#account-page {\n    padding-top: 200px;\n    width: 90%;\n    text-align: center;\n}\n\n#loginForm {\n    width: 50%;\n    margin: auto;\n    padding: 30px;\n}\n\n#inputs {\n    text-align: left;\n}\n\nul {\n    list-style-type: none;\n    margin-left: 0; \n    padding-left: 0;\n}\n\n#confirm {\n    color: white;\n    background-color: teal;\n    font-size: 13pt;\n    font-weight: 100;\n    text-transform: uppercase;\n    padding: 10px;\n}\n\n.register_btn {\n    padding-left: 20px;\n}\n\n.error {\n    color: white;\n    background-color: #CC9817;\n    font-size: 13pt;\n    font-weight: 100;\n    text-transform: uppercase;\n    text-align: center;\n    padding: 10px;\n    width: 90%;\n}\n\n@media only screen and (max-width: 600px) {\n    #account-page {\n        padding-top: 0;\n    }\n\n    #loginForm {\n    width: 90%;\n    margin: auto;\n    }\n}\n\n</style>","import { render } from \"./AccountPage.vue?vue&type=template&id=6e1adc0d&scoped=true\"\nimport script from \"./AccountPage.vue?vue&type=script&lang=js\"\nexport * from \"./AccountPage.vue?vue&type=script&lang=js\"\n\nimport \"./AccountPage.vue?vue&type=style&index=0&id=6e1adc0d&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-6e1adc0d\"\n\nexport default script","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}